(function(s,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(s=typeof globalThis<"u"?globalThis:s||self,e(s.VueImageZooom={},s.Vue))})(this,function(s,e){"use strict";var g=document.createElement("style");g.textContent=`@keyframes rotate-41314760{0%{transform:rotate(0)}to{transform:rotate(360deg)}}div.error[data-v-41314760]{display:flex;align-items:center;justify-content:center;min-height:200px;border:1px solid #eee;background-color:#f9f9f9;border-radius:10px}figure.image-zoom[data-v-41314760]{position:relative;display:inline-block;width:auto;min-height:25vh;background-position:50% 50%;background-color:#eee;margin:0;overflow:hidden;-webkit-user-select:none;user-select:none;cursor:zoom-in}figure.image-zoom.loaded[data-v-41314760]{min-height:auto}figure.image-zoom.zoomed[data-v-41314760]{cursor:zoom-out}figure.image-zoom[data-v-41314760]:before{content:"";background-color:transparent;position:absolute;top:0;left:0;right:0;width:100%;height:100%;opacity:1;transition:opacity .2s ease-in-out;z-index:1}figure.image-zoom[data-v-41314760]:after{content:"";position:absolute;top:calc(50% - 25px);left:calc(50% - 25px);width:50px;height:50px;border-radius:50%;border:5px solid transparent;border-top-color:#333;border-right-color:#333;border-bottom-color:#333;opacity:1;animation:rotate-41314760 2s linear infinite;transition:opacity .2s ease-in-out;z-index:2}figure.image-zoom.loaded[data-v-41314760]:before,figure.image-zoom.loaded[data-v-41314760]:after{opacity:0}figure.image-zoom img[data-v-41314760]{opacity:1;display:block}figure.image-zoom.zoomed img[data-v-41314760]{opacity:0}
/*$vite$:1*/`,document.head.appendChild(g);function p(o,u){const i=e.ref({imgData:null,error:!1,naturalWidth:0,naturalHeight:0});let t=null;const a=()=>{t&&(i.value={imgData:t.src,error:!1,naturalWidth:t.naturalWidth,naturalHeight:t.naturalHeight})},r=l=>{i.value={imgData:null,error:!0,naturalWidth:0,naturalHeight:0},u?.(l)},c=()=>{i.value={imgData:null,error:!1,naturalWidth:0,naturalHeight:0},t&&(t.removeEventListener("load",a),t.removeEventListener("error",r)),o&&(t=new Image,t.addEventListener("load",a),t.addEventListener("error",r),t.src=o)};return e.watch(()=>[o,u],()=>{c()},{immediate:!0}),i}function b(o,u,i,t){const a=e.ref(0);let r;return e.onMounted(()=>{t?.value&&(r=new ResizeObserver(l=>{l[0]&&(a.value=l[0].contentRect.width)}),r.observe(t.value))}),e.onUnmounted(()=>{r&&t?.value&&r.unobserve(t.value)}),e.computed(()=>{if(!u||!i||!a.value)return`${o}`;const l=i.value/a.value*100;return`${l<100?o:l+"%"}`})}function z(o,u){const i=getComputedStyle(document.body).overflow||"auto",t=a=>{o.value&&a.preventDefault()};e.watch([o],([a])=>{a?document.body.style.overflow="hidden":document.body.style.overflow=i}),e.watch(()=>u?.value,(a,r)=>{r&&r.removeEventListener("touchmove",t),a&&a.addEventListener("touchmove",t,{passive:!1})},{immediate:!0}),e.onUnmounted(()=>{document.body.style.overflow=i,u?.value&&u.value.removeEventListener("touchmove",t)})}function w(o){return{getZoomPosition:i=>{if(!o?.value)return;const t=o.value.getBoundingClientRect();let a,r;if((l=>"touches"in l)(i)){const l=i.touches[0];a=(l.clientX-t.x)/t.width*100,r=(l.clientY-t.y)/t.height*100}else a=(i.clientX-t.x)/t.width*100,r=(i.clientY-t.y)/t.height*100;return`${Math.max(0,Math.min(a,100))}% ${Math.max(0,Math.min(r,100))}%`}}}const k=["id","aria-label"],E=["src","alt","width","height"],m=((o,u)=>{const i=o.__vccOpts||o;for(const[t,a]of u)i[t]=a;return i})(e.defineComponent({__name:"vue-image-zooom",props:{zoom:{default:"200"},fullWidth:{type:Boolean,default:!1},alt:{default:"This is an imageZoom image"},width:{default:"100%"},height:{default:"auto"},src:{},id:{},onErrorCallback:{type:Function},errorMessage:{default:"There was a problem loading your image"}},setup(o){const u=e.getCurrentInstance(),i=e.ref(u?.uid),t=e.ref(!1),a=e.ref(!1),r=e.ref("50% 50%"),c=e.ref(null),l=e.ref(!1),d=p(o.src,o.onErrorCallback),T=e.computed(()=>d.value.naturalWidth||0),S=b(o.zoom,o.fullWidth,T,c);z(a,c),e.watch(d,n=>{t.value=n.imgData!==null});const f=n=>{if(l.value=n instanceof TouchEvent,a.value){const h=w(c);h&&(r.value=h.getZoomPosition(n)??"")}},v=n=>{a.value=!a.value,l.value=n instanceof TouchEvent,f(n)},M=n=>{v(n)},Z=n=>{v(n)},C=n=>{f(n)},y=()=>{l.value=!1,a.value=!1,r.value="50% 50%"},D=n=>{f(n)},I=()=>{l.value=!1,a.value=!1,r.value="50% 50%"},P=e.computed(()=>({backgroundImage:a.value&&d.value.imgData?`url(${d.value.imgData})`:"",backgroundSize:S.value,backgroundPosition:r.value,cursor:a.value?"zoom-out":"zoom-in"})),V=e.computed(()=>({width:o.fullWidth?"100%":typeof o.width=="string"?o.width:`${o.width}px`,height:typeof o.height=="string"?o.height:`${o.height}px`}));return(n,h)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.withDirectives(e.createElementVNode("figure",{id:n.id||`image-zoom-${i.value}`,class:e.normalizeClass(["image-zoom",{loaded:t.value,zoomed:a.value}]),ref_key:"figureRef",ref:c,role:"button","aria-label":"Zoomable image: "+n.alt,tabIndex:"0",style:e.normalizeStyle(P.value),onClick:M,onMousemove:D,onMouseleave:I,onTouchstart:Z,onTouchmove:C,onTouchend:y,onTouchcancel:y},[e.unref(d).imgData?(e.openBlock(),e.createElementBlock("img",{key:0,loading:"lazy",id:"imageZoom",src:e.unref(d).imgData,alt:n.alt,width:n.width,height:n.height},null,8,E)):e.createCommentVNode("",!0)],46,k),[[e.vShow,!e.unref(d).error]]),e.withDirectives(e.createElementVNode("div",{class:"error",style:e.normalizeStyle(V.value)},[e.createElementVNode("p",null,e.toDisplayString(n.errorMessage),1)],4),[[e.vShow,e.unref(d).error]])],64))}}),[["__scopeId","data-v-41314760"]]),x=o=>{o.component("VueImageZooom",m)};s.VueImageZooom=m,s.default=m,s.install=x,Object.defineProperties(s,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
